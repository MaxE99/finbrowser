function check_interaction_wrapper_at_last_spot(a,b){spot=a.querySelectorAll(".contentWrapper").length,items_per_screen=getComputedStyle(a.querySelector(".slider")).getPropertyValue("--items-per-screen"),spot%items_per_screen==0&&(b?a.querySelector(".slider").style.zIndex="":a.querySelector(".slider").style.zIndex="1000")}document.querySelector(".sliderWrapper .interactionWrapper .createListButton").addEventListener("click",()=>{document.querySelector(".interactionWrapper .createListMenu").style.display="flex",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[0],!1)}),document.querySelector(".interactionWrapper .closeFormContainerButton").addEventListener("click",()=>{document.querySelector(".interactionWrapper .createListMenu").style.display="none",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[0],!0)}),document.querySelector(".addSourcesButton")&&document.querySelector(".addSourcesButton").addEventListener("click",()=>{document.querySelector(".interactionWrapper .addSourcesForm").style.display="flex",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[2],!1)}),document.querySelectorAll(".addSourcesForm .closeFormContainerButton").forEach(a=>{a.addEventListener("click",()=>{a.parentElement.parentElement.parentElement.querySelector(".addSourcesForm").style.display="none",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[2],!0)})});let selected_sources=[];document.querySelectorAll(".addSourcesForm #textInput").forEach(a=>{a.addEventListener("keyup",async function(h){let c=a.value,b=a.parentElement.querySelector(".addSourcesForm #searchResultsContainer"),d=a.parentElement.querySelector(".addSourcesForm .selectionContainer");if(c&&""!=c.replaceAll(/\s/g,"")){b.style.display="block",d.style.display="none";try{let e=await fetch(`../../api/sources/?feed_search=${c}`,get_fetch_settings("GET"));if(e.ok){let f=await e.json();b.innerHTML="";let g=document.createElement("div");g.innerText="Results:",b.append(g),f.length>0&&f.forEach(c=>{if(!1==selected_sources.includes(c.source_id)){let e=document.createElement("div");e.classList.add("searchResult");let g=document.createElement("img");g.src=`https://finbrowser.s3.us-east-2.amazonaws.com/static/${c.favicon_path}`;let f=document.createElement("span");f.innerText=c.name,f.id=`source_id_${c.source_id}`,e.append(g,f),b.appendChild(e),e.addEventListener("click",function g(){e.removeEventListener("click",g),selected_sources.push(c.source_id);let f=document.createElement("i");f.classList.add("fas","fa-trash"),f.addEventListener("click",()=>{f.parentElement.remove(),selected_sources=selected_sources.filter(function(a){return a.toString()!==f.previousElementSibling.id.replace("source_id_","")})}),e.appendChild(f),d.appendChild(e),b.style.display="none",d.style.display="block",a.value=""})}})}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(i){}}else b.style.display="none",d.style.display="block"})}),document.querySelectorAll(".addSourcesForm .formSubmitButton").forEach(a=>{a.addEventListener("click",async()=>{if(selected_sources.length)try{let a=await fetch(`../../api/sources/subscribe_to_sources/${selected_sources}/`,get_fetch_settings("POST"));if(a.ok){let b=await a.json();showMessage(b,"Success"),window.location.reload()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(c){}else showMessage("You need to select sources!","Error")})}),document.querySelector(".addListsButton")&&document.querySelector(".addListsButton").addEventListener("click",()=>{document.querySelector(".interactionWrapper .addListsForm").style.display="flex",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[1],!1)}),document.querySelectorAll(".addListsForm .closeFormContainerButton").forEach(a=>{a.addEventListener("click",()=>{a.parentElement.parentElement.parentElement.querySelector(".addListsForm").style.display="none",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[1],!0)})});let selected_lists=[];document.querySelectorAll(".addListsForm #textInput").forEach(a=>{a.addEventListener("keyup",async function(h){let c=a.value,b=a.parentElement.querySelector(".addListsForm #searchResultsContainer"),d=a.parentElement.querySelector(".addListsForm .selectionContainer");if(c&&""!=c.replaceAll(/\s/g,"")){b.style.display="block",d.style.display="none";try{let e=await fetch(`../../api/lists/?feed_search=${c}`,get_fetch_settings("GET"));if(e.ok){let f=await e.json();b.innerHTML="";let g=document.createElement("div");g.innerText="Results:",b.append(g),f.length>0&&f.forEach(c=>{if(!1==selected_lists.includes(c.list_id)){let e=document.createElement("div");e.classList.add("searchResult");let f=document.createElement("img");c.list_pic?f.src=c.list_pic:f.src="https://finbrowser.s3.us-east-2.amazonaws.com/static/home/media/finbrowser-bigger-logo.png";let g=document.createElement("span");g.innerText=c.name,g.id=`list_${c.list_id}`,e.append(f,g),b.appendChild(e),e.addEventListener("click",function g(){e.removeEventListener("click",g),selected_lists.push(c.list_id);let f=document.createElement("i");f.classList.add("fas","fa-trash"),f.addEventListener("click",()=>{selected_lists=selected_lists.filter(function(a){return a.toString()!==f.previousElementSibling.id.replace("list_","")}),f.parentElement.remove()}),e.appendChild(f),d.appendChild(e),b.style.display="none",d.style.display="block",a.value=""})}})}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(i){}}else b.style.display="none",d.style.display="block"})}),document.querySelectorAll(".addListsForm button").forEach(a=>{a.addEventListener("click",async()=>{if(selected_lists.length)for(let a=0,c=selected_lists.length;a<c;a++)try{let b=await fetch(`../../api/lists/${selected_lists[a]}/list_change_subscribtion_status/`,get_fetch_settings("POST"));if(b.ok){let d=await b.json();showMessage(d,"Success"),window.location.reload()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(e){}else showMessage("You need to select lists!","Error")})})