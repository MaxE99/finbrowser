function check_interaction_wrapper_at_last_spot(e,t){(spot=e.querySelectorAll(".contentWrapper").length)%(items_per_screen=getComputedStyle(e.querySelector(".slider")).getPropertyValue("--items-per-screen"))==0&&(t?e.querySelector(".slider").style.zIndex="":e.querySelector(".slider").style.zIndex="500")}document.querySelector(".sliderWrapper .interactionWrapper .createListButton").addEventListener("click",()=>{if(check_device_width_below(500))document.querySelector(".smartphoneCreateListMenu").style.display="flex";else if(check_device_width_below(1e3)){let e=document.querySelector(".tabletCreateListMenu");e.style.display="flex",e.style.marginTop=-1*document.querySelector(".contentWrapper").clientHeight+"px"}else document.querySelector(".interactionWrapper .createListMenu").style.display="flex",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[0],!1)}),document.querySelector(".interactionWrapper .closeFormContainerButton").addEventListener("click",()=>{document.querySelector(".interactionWrapper .createListMenu").style.display="none",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[0],!0)}),document.querySelector(".addSourcesButton")&&document.querySelector(".addSourcesButton").addEventListener("click",()=>{document.querySelector(".interactionWrapper .addSourcesForm").style.display="flex",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[2],!1)}),document.querySelectorAll(".addSourcesForm .closeFormContainerButton").forEach(e=>{e.addEventListener("click",()=>{e.parentElement.parentElement.parentElement.querySelector(".addSourcesForm").style.display="none",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[2],!0)})});let selected_sources=[];document.querySelectorAll(".addSourcesForm #textInput").forEach(e=>{e.addEventListener("keyup",async function(t){let r=e.value,l=e.parentElement.querySelector(".addSourcesForm #searchResultsContainer"),s=e.parentElement.querySelector(".addSourcesForm .selectionContainer");if(r&&""!=r.replaceAll(/\s/g,"")){l.style.display="block",s.style.display="none";try{let a=await fetch(`../../api/sources/?feed_search=${r}`,get_fetch_settings("GET"));if(a.ok){let n=await a.json();l.innerHTML="";let i=document.createElement("div");i.innerText="Results:",l.append(i),n.length>0&&n.forEach(t=>{if(!1==selected_sources.includes(t.source_id)){let r=document.createElement("div");r.classList.add("searchResult");let a=document.createElement("img");a.src=`https://finbrowser.s3.us-east-2.amazonaws.com/static/${t.favicon_path}`;let n=document.createElement("span");n.innerText=t.name,n.id=`source_id_${t.source_id}`,r.append(a,n),l.appendChild(r),r.addEventListener("click",function a(){r.removeEventListener("click",a),selected_sources.push(t.source_id);let n=document.createElement("i");n.classList.add("fas","fa-trash"),n.addEventListener("click",()=>{n.parentElement.remove(),selected_sources=selected_sources.filter(function(e){return e.toString()!==n.previousElementSibling.id.split("#")[1]})}),r.appendChild(n),s.appendChild(r),l.style.display="none",s.style.display="block",e.value=""})}})}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(c){}}else l.style.display="none",s.style.display="block"})}),document.querySelectorAll(".addSourcesForm .formSubmitButton").forEach(e=>{e.addEventListener("click",async()=>{if(selected_sources.length)try{let e=await fetch(`../../api/sources/subscribe_to_sources/${selected_sources}/`,get_fetch_settings("POST"));if(e.ok){let t=await e.json();showMessage(t,"Success"),window.location.reload()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(r){}else showMessage("You need to select sources!","Error")})}),document.querySelector(".addListsButton")&&document.querySelector(".addListsButton").addEventListener("click",()=>{document.querySelector(".interactionWrapper .addListsForm").style.display="flex",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[1],!1)}),document.querySelectorAll(".addListsForm .closeFormContainerButton").forEach(e=>{e.addEventListener("click",()=>{e.parentElement.parentElement.parentElement.querySelector(".addListsForm").style.display="none",check_interaction_wrapper_at_last_spot(document.querySelectorAll(".sliderWrapper")[1],!0)})});let selected_lists=[];document.querySelectorAll(".addListsForm #textInput").forEach(e=>{e.addEventListener("keyup",async function(t){let r=e.value,l=e.parentElement.querySelector(".addListsForm #searchResultsContainer"),s=e.parentElement.querySelector(".addListsForm .selectionContainer");if(r&&""!=r.replaceAll(/\s/g,"")){l.style.display="block",s.style.display="none";try{let a=await fetch(`../../api/lists/?feed_search=${r}`,get_fetch_settings("GET"));if(a.ok){let n=await a.json();l.innerHTML="";let i=document.createElement("div");i.innerText="Results:",l.append(i),n.length>0&&n.forEach(t=>{if(!1==selected_lists.includes(t.list_id)){let r=document.createElement("div");r.classList.add("searchResult");let a=document.createElement("img");t.list_pic?a.src=t.list_pic:a.src="https://finbrowser.s3.us-east-2.amazonaws.com/static/home/media/finbrowser-bigger-logo.png";let n=document.createElement("span");n.innerText=t.name,n.id=`list_${t.list_id}`,r.append(a,n),l.appendChild(r),r.addEventListener("click",function a(){r.removeEventListener("click",a),selected_lists.push(t.list_id);let n=document.createElement("i");n.classList.add("fas","fa-trash"),n.addEventListener("click",()=>{selected_lists=selected_lists.filter(function(e){return e.toString()!==n.previousElementSibling.id.split("#")[1]}),n.parentElement.remove()}),r.appendChild(n),s.appendChild(r),l.style.display="none",s.style.display="block",e.value=""})}})}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(c){}}else l.style.display="none",s.style.display="block"})}),document.querySelectorAll(".addListsForm button").forEach(e=>{e.addEventListener("click",async()=>{if(selected_lists.length)for(let e=0,t=selected_lists.length;e<t;e++)try{let r=await fetch(`../../api/lists/${selected_lists[e]}/list_change_subscribtion_status/`,get_fetch_settings("POST"));if(r.ok){let l=await r.json();showMessage(l,"Success"),window.location.reload()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(s){}else showMessage("You need to select lists!","Error")})});