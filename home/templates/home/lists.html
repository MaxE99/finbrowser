{% extends 'home/base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'home/lists_style.css' %}" />
<title>ResearchBrowser | Lists</title>
{% endblock %} {% block content %}
<h2>Lists</h2>
<!-- <div class="explanation">
  Here you can search through all lists created by users of this site. You can
  set a timeframe for when the list was last updated. You can decide if you want
  to only see lists that include articles or sources. You can also decide to only
  search for lists whose sources are more than 50% from a specific source. Then you
  can also search for the name of a list. And last of all if no list fits you're criteria
  you can also create a list yourself.
</div> -->

<div class="filterBar">
  <div class="selectContainer">
    <label for="timeframe">Timeframe</label>
    <select id="timeframe">
      <option value="All" selected="selected">All</option>
      <option value="7">Last 7 days</option>
      <option value="30">Last 30 days</option>
      <option value="90">Last 90 days</option>
      <option value="365">Last 365 days</option>
    </select>
  </div>
  <div class="selectContainer">
    <label for="content">Content</label>
    <select id="content">
      <option value="All" selected="selected">All</option>
      <option value="Articles">Articles</option>
      <option value="Sources">Sources</option>
    </select>
  </div>

  <div class="selectContainer">
    <label class="sourceLabel" for="sources">Sources</label>
    <details>
      <summary>All</summary>
      <ul>
        <li><img src="{% static 'home/media/infinity_favicon.png' %}" alt=""><span>All</span></li>
        <li><img src="{% static 'home/media/medium_favicon.png' %}" alt=""><span>Medium</span></li>
        <li><img src="{% static 'home/media/seekingalpha_favicon.png' %}" alt=""><span>SeekingAlpha</span></li>
        <li><img src="{% static 'home/media/substack__favicon.png' %}" alt=""><span>Substack</span></li>
        <li><img src="{% static 'home/media/twitter_favicon.png' %}" alt=""><span>Twitter</span></li>
        <li><img src="{% static 'home/media/youtube_favicon.png' %}" alt=""><span>YouTube</span></li>
        <li><img src="{% static 'home/media/default_favicon.png' %}" alt=""><span>Other</span></li>
      </ul>
    </details>
  </div>


  <div class="selectContainer searchSelectContainer">
    <div class="searchContainer">
      <input id="search" placeholder="Search term" type="text" autocomplete="off" />
      <i class="fas fa-search"></i>
    </div>
    <div id="autocomplete_list_results"></div>
  </div>
  <div class="selectContainer">
    <button class="searchButton">Search</button>
  </div>
  <div class="selectContainer">
    <button class="createListButton">
      Create List<i class="fas fa-plus"></i>
    </button>
  </div>
</div>
<div class="lowerFilterBar">
  <div class="searchResultsContainer">
    <h4>Search Results</h4>
    <div><span>{{ results_found }}</span> Lists Found</div>
  </div>
  <div class="filterContainer">
    <select id="sortBy">
      <option value="" selected="selected" class="selectPlaceholder">
        SortBy
      </option>
      <option value="likes">Likes</option>
      <option value="newest">Newest First</option>
      <option value="oldest">Oldest First</option>
    </select>
  </div>
</div>

<div class="popUpMenu createListMenu">
  <i class="fas fa-times red closeMenuButton"></i>
  <div class="menuHeader">Create A New List</div>
  <form action="" enctype="multipart/form-data" method="POST" class="createListForm">
    {% csrf_token %} {{ add_list_form }}
    <div class="popUpButtonContainer">
      <input name="createListForm" type="submit" class="saveButton" value="Save" />
    </div>
  </form>
</div>

<div class="listOverlay">

  {% if lists %} {% for list in lists %}
  <div class="browserCategory">{{ list.name }}</div>
  <div class="categoryContainer">
    <div class="carousel-container">
      <div onClick="prev();" class="prev"></div>
      <div class="carousel-list">
        <ul class="slider-content">
          {% for source in list.sources.all %}
          <li>
            <div class="sourceContainer">
              <div class="iconContainer">
                <img class="sourcePic" src="{% static source.favicon_path %}" alt="favicon" />
              </div>
              <a class="sourceLink" href="{% url 'source:profile' domain=source.domain %}"></a>
              <div class="sourceNameOuterContainer">
                <div class="sourceNameInnerContainer">{{ source.name }}</div>
              </div>
            </div>
          </li>
          {% endfor %}
        </ul>
      </div>
      <div onClick="next();" class="next">
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </div>
    </div>
    {% for article in list.articles.all %}
    <div class="article">
      <img src="{% static article.source.favicon_path %}" />
      <div class="articleInformationContainer">
        <div class="articleTitle">{{ article.title }}</div>
        <div class="articleSectorAndDateContainer">
          {% for sector in article.source.sector.all %}
          <a href="{% url 'home:sector-details' name=sector.name %}">{{ sector.name }}</a>
          {% endfor %}
          <div class="articlePubDate">{{ article.pub_date }}</div>
          {% if article.source.top_source %}
          <i class="fas fa-star articleTopSource"></i>
          {% endif %}
          {% if article.source.paywall == "Yes" %}
          <i class="fas fa-lock articleFullPaywall"></i>
          {% elif article.source.paywall == "Semi" %}
          <i class="fas fa-lock articleSemiPaywall"></i>
          {% endif %}
        </div>
      </div>
      <a class="articleLink" href="{{ article.link }}"></a>
      <i class="fas fa-ellipsis-h"></i>
      <div class="articleOptionsContainer articleOptionsContainer{{ article.article_id }}">
        <div class="addToList"><i class="fas fa-list"></i>Add to list</div>
        {% if article.title in highlighted_articles_titles %}
        <div id="{{ article.article_id }}" class="addToHighlighted"><i class="fas fa-times"></i><span>Unhighlight
            article</span></div>
        {% else %}
        <div id="{{ article.article_id }}" class="addToHighlighted"><i class="fas fa-highlighter"></i><span>Highlight
            article</span></div>
        {% endif %}
      </div>
      <div class="addToListForm">
        <i class="fas fa-times"></i>
        <h3>Add to lists</h3>
        <div class="listSelectionContainer">
          {% for list in user_lists %}
          <div class="listContainer">
            <label for="id_list_{{ list.list_id }}">
              {% if article in list.articles.all %}
              <input id="id_list_{{ list.list_id }}" type="checkbox" name="lists" value="{{ list.list_id }}"
                checked="True">
              {{ list }}
              {% else %}
              <input id="id_list_{{ list.list_id }}" type="checkbox" name="lists" value="{{ list.list_id }}">
              {{ list }}
              {% endif %}
            </label>
          </div>
          {% endfor %}
        </div>
        <div class="saveButtonContainer">
          <button class="saveButton">Save</button>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endfor %}
  {% endif %}
  {% if lists %}
  {% include "pagination.html" with page=lists %}
  {% endif %}
  <script src="{% static 'home/lists_script.js' %}"></script>
  {% endblock %}

</div>