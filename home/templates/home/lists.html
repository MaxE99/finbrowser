{% extends 'home/base.html' %} {% load static %} {% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'home/lists_style.css' %}" />
<title>ResearchBrowser | Lists</title>
{% endblock %} {% block content %}
<h2>Lists</h2>
<!-- <div class="explanation">
  Here you can search through all lists created by users of this site. You can
  set a timeframe for when the list was last updated. You can decide if you want
  to only see lists that include articles or sources. You can also decide to only
  search for lists whose sources are more than 50% from a specific source. Then you
  can also search for the name of a list. And last of all if no list fits you're criteria
  you can also create a list yourself.
</div> -->

<div class="filterBar">
  <div class="selectContainer">
    <label for="timeframe">Timeframe</label>
    <select id="timeframe">
      <option value="All" selected="selected">All</option>
      <option value="7">Last 7 days</option>
      <option value="30">Last 30 days</option>
      <option value="90">Last 90 days</option>
      <option value="365">Last 365 days</option>
    </select>
  </div>
  <div class="selectContainer">
    <label for="content">Content</label>
    <select id="content">
      <option value="All" selected="selected">All</option>
      <option value="Articles">Articles</option>
      <option value="Sources">Sources</option>
    </select>
  </div>

  <div class="selectContainer">
    <label class="sourceLabel" for="sources">Sources</label>
    <details>
      <summary>All</summary>
      <ul>
        <li><img src="{% static 'home/media/infinity_favicon.png' %}" alt=""><span>All</span></li>
        <li><img src="{% static 'home/media/medium_favicon.png' %}" alt=""><span>Medium</span></li>
        <li><img src="{% static 'home/media/seekingalpha_favicon.png' %}" alt=""><span>SeekingAlpha</span></li>
        <li><img src="{% static 'home/media/substack_favicon.png' %}" alt=""><span>Substack</span></li>
        <li><img src="{% static 'home/media/twitter_favicon.png' %}" alt=""><span>Twitter</span></li>
        <li><img src="{% static 'home/media/youtube_favicon.png' %}" alt=""><span>YouTube</span></li>
        <li><img src="{% static 'home/media/default_favicon.png' %}" alt=""><span>Other</span></li>
      </ul>
    </details>
  </div>


  <div class="selectContainer searchSelectContainer">
    <div class="searchContainer">
      <input id="search" placeholder="Search term" type="text" autocomplete="off" />
      <i class="fas fa-search"></i>
    </div>
    <div id="autocomplete_list_results"></div>
  </div>
  <div class="selectContainer">
    <button class="searchButton">Search</button>
  </div>
  <div class="selectContainer">
    {% if request.user.is_authenticated %}
    <button class="createListButton">
      Create List<i class="fas fa-plus"></i>
    </button>
    {% else %}
    <a href="{% url 'registration:login' %}" class="createListButton">
      Create List<i class="fas fa-plus"></i>
    </a>
    {% endif %}
  </div>
</div>
<div class="lowerFilterBar">
  <div class="searchResultsContainer">
    <h4>Search Results</h4>
    <div><span>{{ results_found }}</span> Lists Found</div>
  </div>
</div>

<div class="popUpMenu createListMenu">
  <i class="fas fa-times red closeMenuButton"></i>
  <div class="menuHeader">Create A New List</div>
  <form action="" enctype="multipart/form-data" method="POST" class="createListForm">
    {% csrf_token %} {{ add_list_form }}
    <div class="popUpButtonContainer">
      <input name="createListForm" type="submit" class="saveButton" value="Save" />
    </div>
  </form>
</div>

<div class="listOverlay">

  <div class="listHeader">
    <div>List</div>
    <div>Rating</div>
    <div>Ammount</div>
    <div>Creator</div>
  </div>

  {% if lists %} {% for list in lists %}
  <div class="listResultUpperCont">
    <div class="listCont">
      {% if list.list_pic %}
      <img src="{{ list.list_pic.url }}" alt="">
      {% else %}
      <img src="{% static 'home/media/bigger_favicon.png' %}" alt="favicon" />
      {% endif %}
      <div>{{ list.name }}</div>
    </div>
    <div class="ratingsCont">
      <div>Ã˜ {{ list.get_average_rating }} out of {{ list.get_ammount_of_ratings }} ratings</div>
    </div>
    <div class="numberOfSourcesAndArticleCont">
      <span> {{ list.articles.all|length }} Articles | {{ list.sources.all|length }} Sources</span>
    </div>
    <div class="creatorCont">
      {% if list.creator.profile.profile_pic %}
      <img src="{{ list.creator.profile.profile_pic.url }}" alt="user-profile-pic">
      {% else %}
      <img src="{% static 'home/media/profile-picture.png' %}" alt="user-profile-pic">
      {% endif %}
      <div>{{ list.creator.username }}</div>
    </div>
    <a href="{% url 'home:list-details' list_id=list.list_id  %}"></a>
  </div>
  {% endfor %}
  {% endif %}
</div>
{% if lists %}
{% include "pagination.html" with page=lists %}
{% endif %}
<script src="{% static 'home/lists_script.js' %}"></script>
{% endblock %}

</div>