{% extends 'home/base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'home/articles_style.css' %}">
<title>ResearchBrowser | Articles</title>
{% endblock %}

{% block content %}


<h2>Articles</h2>
<!-- <div class="explanation">Here you can search through all the gathered articles. You have the possiblity to select the
    timeframe
    in which the article has been released. You can also search for articles specific to a sector. Then you have the
    opportunity
    to select only articles that are paywalled, that are not paywalled and some that are semi paywalled. To identify if
    an article
    is paywalled the source was proofed to be paywalled or not so some articles maybe not paywalled. Since we want to
    give retail investors
    only a view of accesible sources, all sources that are paywalled are not overly costly. Apart from those options you
    can also only
    search for articles from specific sources or search by name of the article
</div> -->

<div class="filterBar">
    <div class="selectContainer">
        <label for="timeframe">Timeframe</label>
        <select id="timeframe">
            <option value="All" selected="selected">All</option>
            <option value="7">Last 7 days</option>
            <option value="30">Last 30 days</option>
            <option value="90">Last 90 days</option>
            <option value="365">Last 365 days</option>
        </select>
    </div>
    <div class="selectContainer">
        <label for="sector">Sector</label>
        <select id="sector">
            <option value="All" selected="selected">All</option>
            {% for sector in sectors %}
            <option value="{{ sector.name }}">{{ sector.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="selectContainer">
        <label for="paywall">Paywall</label>
        <select id="paywall">
            <option value="All" selected="selected">All</option>
            <option value="Yes">Yes</option>
            <option value="Semi">Semi</option>
            <option value="No">No</option>
        </select>
    </div>
    <div class="selectContainer">
        <label class="sourceLabel" for="sources">Sources</label>
        <details>
            <summary>All</summary>
            <ul>
                <li><img src="{% static 'home/media/infinity_favicon.png' %}" alt=""><span>All</span></li>
                <li><img src="{% static 'home/media/medium_favicon.png' %}" alt=""><span>Medium</span></li>
                <li><img src="{% static 'home/media/seekingalpha_favicon.png' %}" alt=""><span>SeekingAlpha</span></li>
                <li><img src="{% static 'home/media/substack__favicon.png' %}" alt=""><span>Substack</span></li>
                <li><img src="{% static 'home/media/twitter_favicon.png' %}" alt=""><span>Twitter</span></li>
                <li><img src="{% static 'home/media/youtube_favicon.png' %}" alt=""><span>YouTube</span></li>
                <li><img src="{% static 'home/media/default_favicon.png' %}" alt=""><span>Other</span></li>
            </ul>
        </details>
    </div>
    <div class="selectContainer searchSelectContainer">
        <div class="searchContainer">
            <input id="search" placeholder="Search term" type="text" autocomplete="off" />
            <i class="fas fa-search"></i>
        </div>
        <div id="autocomplete_list_results"></div>
    </div>
    <div class="selectContainer">
        <button class="searchButton">Search</button>
    </div>
</div>
<div class="lowerFilterBar">
    <div class="searchResultsContainer">
        <h4>Search Results</h4>
        <div><span>{{ results_found }}</span> Articles Found</div>
    </div>
    <div class="filterContainer">
        <select id="sortBy">
            <option value="" selected="selected" class="selectPlaceholder">
                SortBy
            </option>
            <option value="likes">Likes</option>
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
        </select>
    </div>
</div>


<div class="articlesContainer">
    {% for article in search_articles %}
    <div class="article" id="article{{ article.article_id }}">
        <img src="{% static article.source.favicon_path %}" />
        <div class="articleInformationContainer">
            <div class="articleTitle">{{ article.title }}</div>
            <div class="articleSectorAndDateContainer">
                {% for sector in article.source.sector.all %}
                <a href="{% url 'home:sector-details' name=sector.name %}">{{ sector.name }}</a>
                {% endfor %}
                <div class="articlePubDate">{{ article.pub_date }}</div>
                {% if article.source.top_source %}
                <i class="fas fa-star articleTopSource"></i>
                {% endif %}
                {% if article.source.paywall == "Yes" %}
                <i class="fas fa-lock articleFullPaywall"></i>
                {% elif article.source.paywall == "Semi" %}
                <i class="fas fa-lock articleSemiPaywall"></i>
                {% endif %}
            </div>
        </div>
        <a class="articleLink" href="{{ article.link }}"></a>
        <i class="fas fa-ellipsis-h"></i>
        <div class="articleOptionsContainer articleOptionsContainer{{ article.article_id }}">
            <div class="addToList"><i class="fas fa-list"></i>Add to list</div>
            {% if article.title in highlighted_articles_titles %}
            <div id="{{ article.article_id }}" class="addToHighlighted"><i class="fas fa-times"></i><span>Unhighlight
                    article</span></div>
            {% else %}
            <div id="{{ article.article_id }}" class="addToHighlighted"><i
                    class="fas fa-highlighter"></i><span>Highlight
                    article</span></div>
            {% endif %}
        </div>
        <div class="addToListForm">
            <i class="fas fa-times"></i>
            <h3>Add to lists</h3>
            <div class="listSelectionContainer">
                {% for list in user_lists %}
                <div class="listContainer">
                    <label for="id_list_{{ list.list_id }}">
                        {% if article in list.articles.all %}
                        <input id="id_list_{{ list.list_id }}" type="checkbox" name="lists" value="{{ list.list_id }}"
                            checked="True"> {{ list }}
                        {% else %}
                        <input id="id_list_{{ list.list_id }}" type="checkbox" name="lists" value="{{ list.list_id }}">
                        {{ list }}
                        {% endif %}
                    </label>
                </div>
                {% endfor %}
            </div>
            <div class="saveButtonContainer">
                <button class="saveButton">Save</button>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% if search_articles %}
{% include "pagination.html" with page=search_articles %}
{% endif %}



<script src="{% static 'home/articles_script.js' %}"></script>
{% endblock content %}