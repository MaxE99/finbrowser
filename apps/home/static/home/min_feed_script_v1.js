async function createRecommendedContent(){try{let e=await fetch(`../../api/articles/?feed_content=${document.querySelectorAll(".pageWrapper .longFormContentContainer .recommendedContentContainer .smallFormContentWrapper .articleContainer").length}`,getFetchSettings("GET"));e.ok?((await e.json()).forEach(e=>addNewContentToContainer(e)),document.querySelector(".recommendedContentContainer .loader").remove(),isContentLoading=!1):showMessage("Error: Network request failed unexpectedly!","Error")}catch(t){showMessage("Error: Unexpected error has occurred!","Error")}}async function createStockPitches(){try{let e=await fetch(`../../api/articles/?stock_pitches=${document.querySelectorAll(".pageWrapper .tweetsContainer .smallFormContentWrapper .articleContainer").length}`,getFetchSettings("GET"));e.ok?((await e.json()).forEach(e=>addNewContentToContainer(e,!0)),document.querySelector(".pageWrapper .tweetsContainer .smallFormContentWrapper .loader").remove(),isContentLoading=!1):showMessage("Error: Network request failed unexpectedly!","Error")}catch(t){showMessage("Error: Unexpected error has occurred!","Error")}}function stockPitchesScroll(){if(Math.ceil(STOCK_PITCHES_CONTAINER.scrollTop+STOCK_PITCHES_CONTAINER.clientHeight)>=STOCK_PITCHES_CONTAINER.scrollHeight&&!isContentLoading){let e=document.createElement("div");e.classList.add("loader"),document.querySelector(".pageWrapper .tweetsContainer .smallFormContentWrapper").appendChild(e),createStockPitches(),isContentLoading=!0}}function contentScroll(){let e=document.querySelector(".pageWrapper .longFormContentContainer .activatedTab")?.innerText,t=document.createElement("div");if(t.classList.add("loader"),!isContentLoading){isContentLoading=!0;("Stock Pitches"===e?document.querySelector(".pageWrapper .tweetsContainer .smallFormContentWrapper"):document.querySelector(".pageWrapper .longFormContentContainer .recommendedContentContainer")).appendChild(t),"Stock Pitches"===e?createStockPitches():createRecommendedContent()}}function addNewContentToContainer(e,t=!1){let a=document.createElement("div");a.classList.add("articleContainer"),a.id="cc#"+e.article_id;let n=document.createElement("div");n.classList.add("leftContentSide");let r=document.createElement("div");r.classList.add("profileImageContainer");let l=document.createElement("img");l.src=`${ENV.CLOUDFRONT_DIST}/`+e.source.favicon_path;let o=document.createElement("a");o.classList.add("sourceProfile"),o.href="/source/"+e.source.slug,r.append(l,o),n.appendChild(r),a.appendChild(n);let i=document.createElement("div");i.classList.add("rightContentSide");let s=document.createElement("div");s.classList.add("contentInfoContainer");let c=document.createElement("div");c.classList.add("sourceAndWebsiteContainer");let d=document.createElement("a");d.classList.add("sourceProfile"),d.href="/source/"+e.source.slug,d.innerText=e.source.name;let p=document.createElement("div");p.classList.add("sourceWebsiteProfileContainer");let C=document.createElement("img");C.src=`${ENV.CLOUDFRONT_DIST}/`+e.source.website.logo;let m=document.createElement("a");m.href=e.source.url,p.append(C,m),c.append(d,p),s.appendChild(c);let E=document.createElement("i");E.classList.add("fas","fa-ellipsis-h"),document.querySelector(".articleContainer .fa-ellipsis-h").classList.contains("openAuthPrompt")&&(E.classList.add("openAuthPrompt","ap6"),E.addEventListener("click",()=>openAuthPrompt(E))),E.addEventListener("click",e=>openContentOptionsMenu(e,E));let h=document.createElement("div");h.classList.add("articleOptionsContainer");let L=document.createElement("div");L.classList.add("addToListButton");let u=document.createElement("i");u.classList.add("fas","fa-list");let g=document.createElement("span");g.innerText="Add to list",L.append(u,g),L.addEventListener("click",e=>openAddArticleToListMenu(e));let T=document.createElement("div");T.classList.add("addToHighlightedButton");let S=document.createElement("i");S.classList.add("fas","fa-highlighter");let f=document.createElement("span");e.is_highlighted?f.innerText="Unhighlight Article":f.innerText="Highlight article",T.append(S,f),T.addEventListener("click",()=>changeHighlightedStatus(T)),h.append(L,T),s.append(E,h);let y=document.createElement("div");y.classList.add("contentBody"),y.id="cc#"+e.article_id;let v=document.createElement("p");v.innerText=e.title,y.appendChild(v);let w=document.createElement("div");w.classList.add("timeContainer");let P=document.createElement("p");P.innerText=e.pub_date,w.appendChild(P);let k=document.createElement("div");k.classList.add("tooltipContainer");let W=document.createElement("i");W.classList.add("fa-solid","fa-lock");let x=document.createElement("span");x.classList.add("tooltiptext"),"No"===e.source.paywall?(W.classList.add("noPaywall"),x.innerText="No Paywall",k.classList.add("noPaywallTooltip")):"Semi"===e.source.paywall?(W.classList.add("semiPaywall"),x.innerText="Some Paywall",k.classList.add("semiPaywallTooltip")):(W.classList.add("yesPaywall"),x.innerText="Paywall",k.classList.add("yesPaywallTooltip")),k.appendChild(W),k.appendChild(x),w.appendChild(k);let N=document.createElement("a");N.classList.add("contentLink"),N.href=e.link,N.target="_blank",i.append(s,y,N),i.appendChild(w),a.appendChild(i);(t?document.querySelector(".pageWrapper .tweetsContainer .smallFormContentWrapper"):document.querySelector(".pageWrapper .longFormContentContainer .recommendedContentContainer .smallFormContentWrapper")).appendChild(a)}function observeDOM(){new IntersectionObserver(e=>{e[0].isIntersecting&&contentScroll()},{threshold:0,rootMargin:"0px 0px 30px 0px"}).observe(document.querySelector("footer"))}let isContentLoading=!1;const STOCK_PITCHES_CONTAINER=document.querySelector(".pageWrapper .tweetsContainer .smallFormContentWrapper");document.addEventListener("DOMContentLoaded",observeDOM),STOCK_PITCHES_CONTAINER.addEventListener("scroll",stockPitchesScroll);