const subscribeButton=document.querySelector(".subscribeButton");function check_interaction_wrapper_at_last_spot(a,b){spot=a.querySelectorAll(".contentWrapper").length,items_per_screen=getComputedStyle(a.querySelector(".slider")).getPropertyValue("--items-per-screen"),spot%items_per_screen==0&&(b?a.querySelector(".slider").style.zIndex="":a.querySelector(".slider").style.zIndex="1000")}subscribeButton&&subscribeButton.addEventListener("click",async()=>{if(!subscribeButton.classList.contains("registrationLink"))try{let c=document.querySelector(".rightFirstRowContainer h3").id.replace("list_detail_for_",""),d=subscribeButton.innerText,a=await fetch(`../../api/lists/${c}/list_change_subscribtion_status/`,get_fetch_settings("POST"));if(a.ok){let b=await a.json();"Subscribe"==d?(subscribeButton.classList.replace("unsubscribed","subscribed"),subscribeButton.innerText="Subscribed",showMessage(b,"Success")):(subscribeButton.classList.replace("subscribed","unsubscribed"),subscribeButton.innerText="Subscribe",showMessage(b,"Remove"))}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(e){}});const editButton=document.querySelector(".editButton"),listName=document.querySelector(".rightFirstRowContainer h3").innerText;function openEditMenu(){editButton.remove(),check_device_width_below(500)&&(document.querySelector(".notificationAndSubscribtionContainer .fa-bell").style.display="none"),document.querySelector(".rightFirstRowContainer h3").style.display="none",document.querySelector(".nameChangeContainer").style.display="block",document.querySelector(".nameChangeContainer #id_name").value=listName,document.querySelector(".listPictureContainer #id_list_pic").style.display="block",document.querySelector(".fa-camera").style.display="block",document.querySelector(".buttonContainer").style.display="flex",document.querySelector(".addSourcesButton").style.display="flex",document.querySelectorAll(".highlightedArticlesContainer .article .fa-ellipsis-h").forEach(a=>{a.style.display="none"});let a=document.querySelectorAll(".article .fa-times");a.forEach(a=>{a.style.display="block",a.addEventListener("click",async()=>{try{let c=document.querySelector(".rightFirstRowContainer h3").id.replace("list_detail_for_",""),d=a.parentElement.id.replace("article",""),b=await fetch(`../../api/lists/${c}/delete_article_from_list/${d}/`,get_fetch_settings("DELETE"));if(b.ok){let e=await b.json();showMessage(e,"Remove"),a.parentElement.remove()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(f){}})}),document.querySelectorAll(".sourceDeleteOption").forEach(a=>{"none"!=a.style.display&&a.style.display||(a.style.display="block",a.addEventListener("click",async()=>{try{let c=document.querySelector(".rightFirstRowContainer h3").id.replace("list_detail_for_",""),d=a.id.replace("source_id_",""),b=await fetch(`../../api/lists/${c}/delete_source_from_list/${d}/`,get_fetch_settings("DELETE"));if(b.ok){let e=await b.json();showMessage(e,"Remove"),a.parentElement.parentElement.remove()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(f){}}))})}editButton&&editButton.addEventListener("click",openEditMenu);const sources=document.querySelectorAll(".slider-content li");1===sources.length&&openEditMenu(),document.querySelector(".deleteListButton")&&document.querySelector(".deleteListButton").addEventListener("click",async()=>{try{let b=document.querySelector(".rightFirstRowContainer h3").id.replace("list_detail_for_",""),a=await fetch(`../../api/lists/${b}/`,get_fetch_settings("DELETE"));if(a.ok){let c=await a.json();showMessage(c,"Remove"),window.location.href="../../lists"}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(d){}}),document.querySelector(".addSourcesButton")&&document.querySelector(".addSourcesButton").addEventListener("click",()=>{document.querySelector(".addSourcesForm").style.display="flex",check_interaction_wrapper_at_last_spot(document.querySelector(".sliderWrapper"),!1)}),document.querySelector(".addSourcesForm .closeFormContainerButton")&&document.querySelector(".addSourcesForm .closeFormContainerButton").addEventListener("click",()=>{document.querySelector(".addSourcesForm").style.display="none",check_interaction_wrapper_at_last_spot(document.querySelector(".sliderWrapper"),!0)});let selected_sources=[];document.querySelector(".addSourcesForm #textInput")&&document.querySelector(".addSourcesForm #textInput").addEventListener("keyup",async function(h){let b=document.querySelector(".addSourcesForm #textInput").value,a=document.querySelector(".addSourcesForm #searchResultsContainer"),c=document.querySelector(".addSourcesForm .selectionContainer"),g=document.querySelector(".rightFirstRowContainer h3").id.replace("list_detail_for_","");if(b&&""!=b.replaceAll(/\s/g,"")){a.style.display="block",c.style.display="none";try{let d=await fetch(`../../api/sources/?list_search=${b}&list_id=${g}`,get_fetch_settings("GET"));if(d.ok){let e=await d.json();a.innerHTML="";let f=document.createElement("div");f.innerText="Results:",a.append(f),e.length>0&&e.forEach(b=>{if(!1==selected_sources.includes(b.source_id)){let d=document.createElement("div");d.classList.add("searchResult");let f=document.createElement("img");f.src=`https://finbrowser.s3.us-east-2.amazonaws.com/static/${b.favicon_path}`;let e=document.createElement("span");e.innerText=b.name,e.id=`source_id_${b.source_id}`,d.append(f,e),a.appendChild(d),d.addEventListener("click",function f(){d.removeEventListener("click",f),selected_sources.push(b.source_id);let e=document.createElement("i");e.classList.add("fas","fa-trash"),e.addEventListener("click",()=>{e.parentElement.remove(),selected_sources=selected_sources.filter(function(a){return a.toString()!==e.previousElementSibling.id.replace("source_id_","")})}),d.appendChild(e),c.appendChild(d),a.style.display="none",c.style.display="block",document.querySelector(".addSourcesForm #textInput").value=""})}})}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(i){}}else a.style.display="none",c.style.display="block"}),document.querySelector(".addSourcesForm button")&&document.querySelector(".addSourcesForm button").addEventListener("click",async()=>{let b=document.querySelector(".rightFirstRowContainer h3").id.replace("list_detail_for_","");if(selected_sources.length){selected_sources=selected_sources.join();try{let a=await fetch(`../../api/lists/${b}/add_sources/${selected_sources}/`,get_fetch_settings("POST"));if(a.ok){let c=await a.json();showMessage(c,"Success"),window.location.reload()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(d){}}else showMessage("You need to select sources!","Error")});const one=document.getElementById("first"),two=document.getElementById("second"),three=document.getElementById("third"),four=document.getElementById("fourth"),five=document.getElementById("fifth"),confirmBox=document.getElementById("confirm-box"),handleStarSelect=(c,d)=>{let b=d.children;for(let a=0;a<b.length;a++)a<c?b[a].classList.add("checked"):b[a].classList.remove("checked")},handleSelect=b=>{let a=document.querySelector(".rate-form");switch(b){case"first":handleStarSelect(1,a);return;case"second":handleStarSelect(2,a);return;case"third":handleStarSelect(3,a);return;case"fourth":handleStarSelect(4,a);return;case"fifth":handleStarSelect(5,a);return;default:handleStarSelect(0,a)}},getNumericValue=a=>"first"===a?1:"second"===a?2:"third"===a?3:"fourth"===a?4:"fifth"===a?5:0;if(one){let a=[one,two,three,four,five];a.forEach(a=>a.addEventListener("mouseover",a=>{handleSelect(a.target.id)}))}if(document.querySelectorAll(".rankingStar").forEach(a=>{a.addEventListener("click",async b=>{let c=b.target.id,d=getNumericValue(c),e=document.querySelector(".rightFirstRowContainer h3").id.replace("list_detail_for_","");try{let f={list_id:e,rating:d},a=await fetch("../../api/list_ratings/",{method:"POST",headers:{"X-CSRFToken":getCookie("csrftoken"),Accept:"application/json","Content-Type":"application/json"},mode:"same-origin",body:JSON.stringify(f)});if(a.ok){let g=await a.json();showMessage(g,"Success"),window.location.reload()}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(h){}})}),document.querySelector(".avgRating span")){let b=Math.round(document.querySelector(".avgRating span").innerText);handleStarSelect(b,document.querySelector(".ratedContainer"))}const rateListButton=document.querySelector(".rateListButton");rateListButton&&rateListButton.addEventListener("click",()=>{rateListButton.classList.contains("registrationLink")||(document.querySelector(".rate-formUpperContainer").style.display="block",document.querySelector(".rating").style.opacity="0",document.querySelector(".ratingsAmmountContainer").style.opacity="0",document.querySelector(".rateListButton").style.opacity="0",document.querySelector(".rankingsHeader").style.opacity="0")})