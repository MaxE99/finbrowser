if(location.href.includes("?commentary=")){let e=document.querySelectorAll(".pageWrapper .tabsContainer button"),t=document.querySelectorAll(".pageWrapper .tabsContent");for(let r=0,l=e.length;r<l;r++)e[r].classList.remove("activatedTab"),t[r].classList.remove("tabsContentActive");e[1].classList.add("activatedTab"),t[1].classList.add("tabsContentActive")}if(location.href.includes("?news=")){let n=document.querySelectorAll(".pageWrapper .tabsContainer button"),o=document.querySelectorAll(".pageWrapper .tabsContent");for(let a=0,i=n.length;a<i;a++)n[a].classList.remove("activatedTab"),o[a].classList.remove("tabsContentActive");n[2].classList.add("activatedTab"),o[2].classList.add("tabsContentActive")}if(location.href.includes("?saved_content=")){let s=document.querySelectorAll(".pageWrapper .tabsContainer button"),c=document.querySelectorAll(".pageWrapper .tabsContent");for(let d=0,u=s.length;d<u;d++)s[d].classList.remove("activatedTab"),c[d].classList.remove("tabsContentActive");s[3].classList.add("activatedTab"),c[3].classList.add("tabsContentActive")}document.querySelectorAll(".sliderWrapper .slider .removeFromListButton").forEach(e=>{e.addEventListener("click",async()=>{try{let t=document.querySelector(".firstRow .nameContainer h2").id,r=e.closest(".contentWrapper").id.split("#")[1],l={source_id:r},n=await fetch(`../../api/lists/${t}/`,get_fetch_settings("PATCH",l));n.ok?(showMessage(context="Source has been removed!","Remove"),e.closest(".contentWrapper").remove()):showMessage("Error: Network request failed unexpectedly!","Error")}catch(o){}})});let selected_sources=[];document.querySelector(".addSourceContainer #textInput")&&document.querySelector(".addSourceContainer #textInput").addEventListener("keyup",async function(){let e=document.querySelector(".addSourceContainer #textInput").value,t=document.querySelector(".addSourceContainer #searchResultsContainer"),r=document.querySelector(".addSourceContainer .selectionContainer"),l=document.querySelector(".firstRow .nameContainer h2").id;if(e&&""!=e.replaceAll(/\s/g,"")){t.style.display="block",r.style.display="none";try{let n=await fetch(`../../api/sources/?list_search=${e}&list_id=${l}`,get_fetch_settings("GET"));if(n.ok){let o=await n.json();t.innerHTML="";let a=document.createElement("div");a.innerText="Results:",t.append(a),o.length>0&&o.forEach(e=>{if(!1==selected_sources.includes(e.source_id)){let l=document.createElement("div");l.classList.add("searchResult");let n=document.createElement("img");n.src=`https://finbrowser.s3.us-east-2.amazonaws.com/static/${e.favicon_path}`;let o=document.createElement("span");o.innerText=e.name,o.id=`source_id_${e.source_id}`,l.append(n,o),t.appendChild(l),l.addEventListener("click",function n(){l.removeEventListener("click",n),selected_sources.push(e.source_id);let o=document.createElement("i");o.classList.add("fas","fa-times"),o.addEventListener("click",()=>{o.parentElement.remove(),selected_sources=selected_sources.filter(function(e){return e.toString()!==o.previousElementSibling.id.split("#")[1]})}),l.appendChild(o),r.appendChild(l),t.style.display="none",r.style.display="block",document.querySelector(".addSourcesForm #textInput").value=""})}})}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(i){}}else t.style.display="none",r.style.display="block"});let activatedButton=!1;document.querySelector(".addSourceContainer button").addEventListener("click",async()=>{let e=document.querySelector(".firstRow .nameContainer h2").id;if(selected_sources.length&&!activatedButton){activatedButton=!0;for(let t=0,r=selected_sources.length;t<r;t++)try{let l={source_id:selected_sources[t]},n=await fetch(`../../api/lists/${e}/`,get_fetch_settings("PATCH",l));n.ok||showMessage("Error: Network request failed unexpectedly!","Error")}catch(o){}showMessage(context="List has been updated!","Success"),window.location.reload()}else showMessage("You need to select sources!","Error")}),document.querySelector(".firstRow .nameContainer").addEventListener("click",()=>{let e=document.querySelector(".firstRow .nameContainer i"),t=document.querySelector(".listOptionsContainer");"block"===t.style.display?(t.style.display="none",e.classList.replace("fa-chevron-up","fa-chevron-down")):(t.style.display="block",e.classList.replace("fa-chevron-down","fa-chevron-up"))}),document.querySelector(".firstRow .listOptionsContainer .createListButton").addEventListener("click",async()=>{try{let e=await fetch("../../api/lists/",get_fetch_settings("POST"));if(e.ok){let t=await e.json();window.location.replace(`../../list/${t.list_id}`)}else showMessage("Error: Network request failed unexpectedly!","Error")}catch(r){}},{once:!0}),document.querySelector(".editMenu .deleteListButton").addEventListener("click",()=>{let e=document.querySelector(".nameContainer h2").id;1===document.querySelectorAll(".listsContainer .listOption").length?showMessage("You are not allowed to delete your last watchlist!","Error"):(document.querySelector(".listMenuWrapper").style.display="none",document.querySelector(".editMenu").style.display="none",document.querySelector(".listMenuWrapper").style.display="block",document.querySelector(".listMenuWrapper .warningMessageContainer").style.display="flex",document.querySelector(".listMenuWrapper .warningMessageContainer .discardButton").addEventListener("click",()=>{removeModalStyle(),document.querySelector(".listMenuWrapper").style.display="none",document.querySelector(".listMenuWrapper .warningMessageContainer").style.display="none"}),document.querySelector(".listMenuWrapper .warningMessageContainer .confirmButton").addEventListener("click",async()=>{try{let t=await fetch(`../../api/lists/${e}/`,get_fetch_settings("DELETE"));t.ok?document.querySelectorAll(".listOptionsContainer .listOption").forEach(t=>{t.id.replace("list","")!==e&&window.location.replace("../../lists")}):showMessage("Error: Network request failed unexpectedly!","Error")}catch(r){}},{once:!0}))}),document.querySelector(".actionButtonContainer .addSourceButton").addEventListener("click",()=>{document.querySelector(".listMenuWrapper").style.display="block",document.querySelector(".addSourceContainer").style.display="block",setModalStyle()}),document.querySelectorAll(".emptyInformationContainer button").forEach(e=>e.addEventListener("click",()=>{document.querySelector(".listMenuWrapper").style.display="block",document.querySelector(".addSourceContainer").style.display="block",setModalStyle()})),document.querySelector(".addSourceContainer .closeAddSourceContainer").addEventListener("click",()=>{document.querySelector(".listMenuWrapper").style.display="none",document.querySelector(".addSourceContainer").style.display="none",removeModalStyle()}),document.querySelector(".editListButton").addEventListener("click",()=>{document.querySelector(".listMenuWrapper").style.display="block",document.querySelector(".editMenu").style.display="block",setModalStyle()}),document.querySelector(".editMenu .fa-times").addEventListener("click",()=>{document.querySelector(".listMenuWrapper").style.display="none",document.querySelector(".editMenu").style.display="none",removeModalStyle()}),document.querySelector(".menuContainer .editMenu .saveEditsButton").addEventListener("click",async()=>{let e=document.querySelector(".firstRow .nameContainer h2").id,t=document.querySelector(".editMenu .listNameContainer input").value,r=document.querySelector(".editMenu .mainListContainer input").checked,l={name:t,main:r};if(t.trim().length)try{let n=await fetch(`../../api/lists/${e}/`,{method:"PATCH",headers:{"X-CSRFToken":getCookie("csrftoken"),Accept:"application/json","Content-Type":"application/json"},mode:"same-origin",body:JSON.stringify(l)});n.ok?window.location.reload():showMessage("Error: Network request failed unexpectedly!","Error")}catch(o){}else showMessage("Please enter a name!","Error")},{once:!0}),document.querySelector(".listMenuWrapper .editMenu .mainListContainer .infoLink i").addEventListener("click",()=>{document.querySelector(".listMenuWrapper").style.display="none",document.querySelector(".listMenuWrapper .editMenu").style.display="none",document.querySelector(".fullScreenPlaceholder").style.display="flex",document.querySelector(".fullScreenPlaceholder .explanationContainer").style.display="block",document.querySelector(".fullScreenPlaceholder .explanationContainer h3").innerText="Main List",document.querySelector(".fullScreenPlaceholder .explanationContainer .explanation").innerText="Your main portfolio is opened whenever you click on the portfolio button in the header. You always have to have atleast one main portfolio. If you don't have more than one portfolio you can't delete your main portfolio. If you have more than one portfolio and delete your main the next portfolio alphabetically will become your new main portfolio. You can change your main portfolio by opening the edit menu of a portfolio which currently is not your main portfolio and set it to your new main portfolio.",document.querySelector(".fullScreenPlaceholder .fullScreenWrapper .explanationContainer .fa-times").addEventListener("click",()=>{document.querySelector(".fullScreenPlaceholder").style.display="none",document.querySelector(".fullScreenPlaceholder .explanationContainer").style.display="none",document.querySelector(".listMenuWrapper").style.display="flex",document.querySelector(".listMenuWrapper .editMenu").style.display="block"})});