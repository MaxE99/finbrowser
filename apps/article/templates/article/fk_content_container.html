{% load static %}

<div class="categoryHeader">{{ title }}</div>
<div class="smallFormContentWrapper">
    {% for tweet in qs %}
    <div class="articleContainer" id="article_id_{{ tweet.article.article_id }}">
        <div class="leftContentSide">
            <div class="profileImageContainer">
                <img src="{% static tweet.article.source.favicon_path %}" />
                <a class="sourceProfile" href="{{ tweet.article.source.get_absolute_url }}"></a>
            </div>
        </div>
        <div class="rightContentSide">
            <div class="contentInfoContainer">
                <div class="sourceAndWebsiteContainer">
                    <a class="sourceProfile" href="{{ tweet.article.source.get_absolute_url }}">{{ tweet.article.source.name }}</a>
                    <div class="sourceWebsiteProfileContainer">
                        {% if tweet.article.source.website.name == "YouTube" %}
                        <img class="youtubeLogo" src="{% static tweet.article.source.website.logo %}" />
                        {% else %}
                        <img src="{% static tweet.article.source.website.logo %}" />
                        {% endif %}
                        <a href="{{ tweet.article.source.url }}"></a>
                    </div>
                </div>
                <i class="fas fa-ellipsis-h"></i>
                <div class="articleOptionsContainer">
                    {% if request.user.is_authenticated %}
                    <div class="addToListButton"><i class="fas fa-list"></i>Add to list</div>
                    {% if tweet.article.article_id in highlighted_content_ids %}
                    <div class="addToHighlightedButton"><i class="fas fa-times"></i><span>Unhighlight
                            article</span></div>
                    {% else %}
                    <div class="addToHighlightedButton"><i class="fas fa-highlighter"></i><span>Highlight
                            article</span></div>
                    {% endif %}
                    {% else %}
                    <a href="{% url 'account_login' %}" class="addToListButton registrationLink"><i
                            class="fas fa-list"></i>Add
                        to list</a>
                    <a href="{% url 'account_login' %}" class="addToHighlightedButton registrationLink"><i
                            class="fas fa-highlighter"></i><span>Highlight article</span></a>
                    {% endif %}
                </div>
                <div class="addToListForm">
                    <div class="formHeaderContainer">Add To Lists<i class="fas fa-times closeFormContainerButton"></i>
                    </div>
                    {% if user_lists %}
                    <div class="listSelectionContainer">
                        {% for list in user_lists %}
                        <div class="listContainer">
                            <label for="list_id_{{ list.list_id }}">
                                {% if tweet in list.articles.all %}
                                <input id="list_id_{{ list.list_id }}" type="checkbox" name="lists" checked="True">
                                {{ list }}
                                {% else %}
                                <input id="list_id_{{ list.list_id }}" type="checkbox" name="lists">
                                {{ list }}
                                {% endif %}
                            </label>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="buttonsContainer">
                        <button class="saveButton">Save</button>
                        <button class="createNewListButton">Create</button>
                    </div>
                    {% else %}
                    <div class="listContainer">You haven't created any lists!</div>
                    <button class="createNewListButton createFirstList">Create
                        First
                        List</button>
                    {% endif %}
                </div>
                <div class="createListMenu articleCreateListMenu formContainer">
                    <div class="formHeaderContainer">Create A New List<i
                            class="fas fa-times closeFormContainerButton"></i>
                    </div>
                    <form action="" enctype="multipart/form-data" method="POST" class="createListForm">
                        {% csrf_token %} {{ add_list_form }}
                        <input name="createListForm" type="submit" class="formSubmitButton" value="Save" />
                    </form>
                </div>
            </div>
            {% if tweet.article.tweet_type.type == "Retweet" %}
            <div class="retweetWrapper">Retweeted post by <span>@{{ tweet.article.tweet_type.author }}</span></div>
            {% endif %}
            {% if tweet.article.tweet_type.type == "Reply" %}
            <div class="replyWrapper">Replying to <span>@{{ tweet.article.tweet_type.author }}</span></div>
            {% endif %}
            {% if tweet.article.tweet_type.type != "Retweet" %}
            <div class="contentBody">
                <p>{{ tweet.article.title }}</p>
            </div>
            {% endif %}
            {% if tweet.article.tweet_type.image_path %}
            <img class="tweetImage" src="{% static tweet.article.tweet_type.image_path %}">
            {% endif %}
            {% if tweet.article.tweet_type.type == "Quote" or tweet.article.tweet_type.type == "Retweet" or tweet.article.tweet_type.type == "Reply" %}
            <div class="quoteWrapper">
                <div class="quoteUpperContainer">
                    <div class="quoteAuthor">{{ tweet.article.tweet_type.author }}</div>
                    <div class="quoteDate">{{ tweet.article.tweet_type.pub_date }}</div>
                </div>
                <div class="quoteText">{{ tweet.article.tweet_type.text }}</div>
                {% if tweet.article.tweet_type.initial_tweet_img_path %}
                <img class="tweetImage" src="{% static tweet.article.tweet_type.initial_tweet_img_path %}">
                {% endif %}
            </div>
            {% endif %}
            <div class="timeContainer">
                <p>{{ tweet.article.pub_date }}</p>
            </div>
            <a class="contentLink" href="{{ tweet.article.link }}"></a>
        </div>
    </div>
    {% endfor %}
</div>